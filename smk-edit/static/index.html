<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Simple Map Kit configuration utility">
        <meta name="author" content="Vivid Solutions Inc.">
        <title>SMK Editor</title>
        <!-- Scripts and CSS -->
        <!-- JQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <!-- Lato Font -->
        <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>
        <!-- Material Icons -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- Materialize CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <!-- Materialize -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <!-- Leaflet -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>
        <!-- ESRI Leaflet -->
    	<script src="https://unpkg.com/esri-leaflet@2.1.3/dist/esri-leaflet.js" integrity="sha512-pijLQd2FbV/7+Jwa86Mk3ACxnasfIMzJRrIlVQsuPKPCfUBCDMDUoLiBQRg7dAQY6D1rkmCcR8286hVTn/wlIg==" crossorigin=""></script>
        <link rel="stylesheet" href="https://js.arcgis.com/4.4/esri/css/main.css" />
        <!-- Fancy Tree for layer viewers -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.fancytree/2.28.0/jquery.fancytree-all-deps.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.fancytree/2.28.0/skin-lion/ui.fancytree.min.css"  rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.fancytree/2.28.0/skin-lion/vline-rtl.gif"  rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.fancytree/2.28.0/skin-lion/vline.gif"  rel="stylesheet">
        <!-- Omnivore, for converting file uploads into geojson -->
        <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
        <!-- lodash -->
        <script src='https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js'></script>
        <!-- Vue Dev -->
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <!-- Vue Prod -->
        <!-- script src="https://cdn.jsdelivr.net/npm/vue"></script -->
        <!-- smk util css -->
        <link rel="stylesheet" href="assets/css/smk.css" type='text/css'>
    </head>

    <body>
        <div id="content" v-bind:class="{ 'service-no-response': !serviceStatus }">
            <header>
                <div>
                    <nav>
                        <div class="nav-wrapper blue-grey darken-2">
                            <a href="index.html" class="brand-logo">Simple Map Kit Editor</a>
                            <a href="#" data-target="slide-out" class="sidenav-trigger">
                                <i class="material-icons">menu</i>
                            </a>
                        </div>
                    </nav>
                    <ul id="slide-out" class="sidenav sidenav-fixed blue-grey darken-2">
                        <li>
                            <div class="user-view">
                                <div class="background blue-grey darken-1"><img src="assets/images/bc_gov_logo_transparent.png" style="padding-left: 30px;"/></div>
                            </div>
                        </li>
                        <li>
                            <div class="subheader white-text title-panel">
                                <p>Welcome to the SMK Configuration Utility</p>
                                <p>Use this tool to modify your application's map configuration.</p>
                            </div>
                        </li>
                        <!-- <li><a class="subheader white-text">Options</a></li> -->
                        <li v-bind:class="{active:currentTabComponent=='identity'}">
                            <a href="#" v-on:click="tabSwitch('identity')" class="waves-effect white-text">
                                <i class="material-icons">assignment</i>Application
                            </a>
                        </li>
                        <li v-bind:class="{active:currentTabComponent=='basemap'}">
                            <a href="#" v-on:click="tabSwitch('basemap')" class="waves-effect white-text">
                                <i class="material-icons">terrain</i>Basemap and Extent
                            </a>
                        </li>
                        <li v-bind:class="{active:currentTabComponent=='mpcm-layers'}">
                            <a href="#" v-on:click="tabSwitch('mpcm-layers')" class="waves-effect white-text">
                                <i class="material-icons">layers</i>Add DataBC Layers
                            </a>
                        </li>
                        <li v-bind:class="{active:currentTabComponent=='wms-layers'}">
                            <a href="#" v-on:click="tabSwitch('wms-layers')" class="waves-effect white-text">
                                <i class="material-icons">backup</i>Add WMS Layers
                            </a>
                        </li>
                        <li v-bind:class="{active:currentTabComponent=='vector-layers'}">
                            <a href="#" v-on:click="tabSwitch('vector-layers')" class="waves-effect white-text">
                                <i class="material-icons">edit</i>Add Vector Layers
                            </a>
                        </li>
                        <li v-bind:class="{active:currentTabComponent=='layers'}">
                            <a href="#" v-on:click="tabSwitch('layers')" class="waves-effect white-text">
                                <i class="material-icons">map</i>Manage Layers
                            </a>
                        </li>
                        <li v-bind:class="{active:currentTabComponent=='tools'}">
                            <a href="#" v-on:click="tabSwitch('tools')" class="waves-effect white-text">
                                <i class="material-icons">build</i>Tools
                            </a>
                        </li>
                        <li>
                            <div class="subheader white-text title-panel">
                                <p>Click <b>Save</b> at any time to commit your changes</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </header>
            <main class="main-container">
                <div id="backgroundMap" class="background-map" ></div>
                <div class="background-map" style="background: rgba(0, 0, 0, 0.3);" ></div>
                <!-- <div id="titlePanel" class="title-panel">
                    <p class="label"> Welcome to the SMK Configuration Utility</p>
                    <p class="label"> With this tool you can modify your projects map-config.json</p>
                    <p class="label"> Select an option (on the left) to modify layers, data, and tools</p>
                    <p class="label"> Click 'Save' at any time to commit your changes</p>
                </div> -->
                <div id="contentPanel" class="content-panel" style="display: none;">
                    <div class="card white" style="margin: 0px;">
                        <div id="contentCard" class="card-content black-text" style="height: calc(100vh - 130px); overflow: auto;">
                            <component v-bind:is="currentTabComponent"
                                       v-bind:config="config"
                                       v-bind:catalog-layers="catalogLayers"
                                       v-bind:wms-layers="wmsLayers"
                                       v-bind:vector-layers="vectorLayers"
                                       v-bind:editing-layer="editingLayer"
                                       v-bind:editing-tool="editingTool"
                                       v-bind:key="componentKey"></component>
                        </div>
                        <div class="card-action">
                            <a class="waves-effect waves-light btn-small blue-grey darken-2" v-on:click="saveConfig()" style="width: 140px;"><em style="position: absolute; top: 4px; left: 14px;" class="material-icons left">save</em>Save</a>
                            <!-- <a class="waves-effect waves-light btn-small blue-grey darken-2" v-on:click="testConfig()" style="width: 140px;"><em style="position: absolute; top: 4px; left: 14px;" class="material-icons left">cached</em>Test</a> -->
                            <!-- <a class="waves-effect waves-light btn-small blue-grey darken-2" v-on:click="buildConfig()" style="width: 140px;"><em style="position: absolute; top: 4px; left: 14px;" class="material-icons left">build</em>Build</a> -->
                        </div>
                    </div>
                </div>
            </main>
            <footer>
            </footer>
        </div>

        <script src="//localhost:35729/livereload.js"></script>

        <!-- templates, init, util scripts -->
        <script src="templates/identity-template.js"></script>
        <script src="templates/basemap-template.js"></script>
        <script src="templates/mpcm-layers-template.js"></script>
        <script src="templates/wms-layers-template.js"></script>
        <script src="templates/vector-layers-template.js"></script>
        <script src="templates/edit-layer-template.js"></script>
        <script src="templates/edit-tool-template.js"></script>
        <script src="templates/templates.js"></script>
        <!-- <script src="admin-app.js"></script> -->
        <script src="smk-util.js"></script>
        <script src="smk-layer-management.js"></script>
        <script src="smk-query-management.js"></script>
        <script src="smk-create-vector.js"></script>
        <script src="smk-file-io.js"></script>

        <script>
            document.addEventListener( 'DOMContentLoaded', function() {
                M.Sidenav.init( document.querySelectorAll('.sidenav') );
            } )
        </script>

        <script type="module">
            import './admin-app.js'


        </script>
    </body>
</html>